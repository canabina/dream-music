<!DOCTYPE html>

<html ng-app="vk" lang="en" class="app js no-touch no-android chrome no-firefox no-iemobile no-ie no-ie8 no-ie10 no-ie11 no-ios no-ios7 ipad">

<head>
	<meta charset="utf-8">
	<title>Musik.app</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="/site/jplayer.flat.css" type="text/css">
	<link rel="stylesheet" href="/site/app.v1.css" type="text/css">
	<link rel="stylesheet" href="/site/jquery.mCustomScrollbar.min.css" type="text/css">
	<link rel="stylesheet" href="/site/ngDialog.css">
    <link rel="stylesheet" href="/site/ngDialog-theme-default.css">
    <link rel="stylesheet" href="/site/ngDialog-theme-plain.css">
    <link rel="stylesheet" href="/site/ngDialog-custom-width.css">

    <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADj/wAAwf8AAMH/AADB/wAAwZ8AAOE/AAD9PwAA/Z8AAP3PAAD9jwAA/R8AAPw/AAD8fwAA/P8AAP3/AAD//wAA" rel="icon" type="image/x-icon" />

	<script>
		var user = <%-JSON.stringify(user)%>;
		var playlist = <%-JSON.stringify(playlist)%>;
	</script>

</head>

<body class="" ng-controller="VkClientCtrl">
	<section class="vbox">
		<header class="bg-black lter header header-md navbar navbar-fixed-top-xs">
			<div class="navbar-header aside bg-success nav-xs">
				<a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">
					<i class="icon-list">
					</i>
				</a>
				<a href="" ng-click="showMy()" class="navbar-brand text-lt">
					<i class="icon-earphones">
					</i>
					<img src="/site/logo.png" alt="." class="hide">
					<span class="hidden-nav-xs m-l-sm">Musik
					</span>
				</a>
				<a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">
					<i class="icon-settings">
					</i>
				</a>
			</div>
			<form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">
				<div class="form-group">
					<div class="input-group">
						<span class="input-group-btn">
							<button type="submit" class="btn btn-sm bg-white btn-icon rounded">
								<i class="fa fa-search">
								</i>
							</button>
						</span>
						<input type="text" class="form-control input-sm no-border rounded" ng-model="query" ng-change="search()" placeholder="Search songs...">
					</div>
				</div>
			</form>
			<div class="navbar-right ">
				<ul class="nav navbar-nav m-n hidden-xs nav-user user">
					<li class="hidden-xs">
						<a href="#" class="dropdown-toggle lt" data-toggle="dropdown">
							<i class="icon-bell">
							</i>
							<span class="badge badge-sm bg-danger" style="display: inline-block;">{{mainPlaylist.length}}</span>
						</a>
					</li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle bg clear">
							<span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
								<img src="<%-user.photo%>" alt="...">
							</span> <%-user.fio%>

						</a>
					</li>
				</ul>
			</div>
		</header>
		<section>
			<section class="hbox stretch">
				<!-- .aside -->
				<aside class="bg-black dk nav-xs aside hidden-print" id="nav">
					<section class="vbox">
						<section class="w-f-md scrollable">
							<div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 749px;">
								<div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="10px" data-railopacity="0.2" style="overflow: hidden; width: auto; height: 749px;">
									<!-- nav -->
									<nav class="hidden-xs">
										<ul class="nav bg clearfix">
											<li class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted"> Discover
											</li>
											<li>
												<a ng-click="showMy()" href="">
													<i class="icon-disc icon text-success">
													</i>
													<span class="font-bold">My</span>
												</a>
											</li>

										</ul>

									</nav>
									<!-- / nav -->
								</div>
								<div class="slimScrollBar" style="width: 10px; position: absolute; top: -46px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 0px; height: 749px; background: rgb(255, 255, 255);">
								</div>
								<div class="slimScrollRail" style="width: 10px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; opacity: 0.2; z-index: 90; right: 0px; background: rgb(255, 255, 255);">
								</div>
							</div>
						</section>
						<footer class="footer hidden-xs no-padder text-center-nav-xs">
							<div class="bg hidden-xs ">
								<div class="dropdown dropup wrapper-sm clearfix">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">
										<span class="thumb-sm avatar pull-left m-l-xs">
											<img src="/site/a3.png" class="dker" alt="...">
											<i class="on b-black">
											</i>
										</span>
										<span class="hidden-nav-xs clear">
											<span class="block m-l">
												<strong class="font-bold text-lt"><%-user.fio%>
												</strong>
												<b class="caret">
												</b>
											</span>
										</span>
									</a>
									<ul class="dropdown-menu animated fadeInRight aside text-left">
										<li>
											<span class="arrow bottom hidden-nav-xs">
											</span>
											<a href="#">Settings
											</a>
										</li>
										<li>
											<a href="profile.html">Profile
											</a>
										</li>
										<li>
											<a href="#">
												<span class="badge bg-danger pull-right">3
												</span> Notifications
											</a>
										</li>
										<li>
											<a href="docs.html">Help
											</a>
										</li>
										<li class="divider">
										</li>
										<li>
											<a href="modal.lockme.html" data-toggle="ajaxModal">Logout
											</a>
										</li>
									</ul>
								</div>
							</div>
						</footer>
					</section>
				</aside>
				<!-- /.aside -->
				<section id="content">
					<section class="vbox">
						<section ng-class="{'w-f-md': currentMyPlaying}">
							<section class="hbox stretch bg-black dker">
								<!-- / side content -->

								<aside class="col-sm-4 no-padder" id="sidebar">
									<section class="vbox animated fadeInUp">
										<section class="mCustomScrollbar" data-mcs-theme="minimal">

											<ul class="list-group list-group-lg no-radius no-border no-bg m-t-n-xxs m-b-none auto">
												<li class="list-group-item" ng-repeat="audio in myPlaylist track by $index">
													<div class="pull-right m-l" ng-show="getById(mainPlaylist, audio.id) === undefined">
														<a href="#" class="m-r-sm" ng-click="addToPlaylist(audio)">
															<i class="icon-plus">
															</i>
														</a>
													</div>

													<a href="#" class="jp-play-me m-r-sm pull-left">
														<i class="icon-control-play " ng-click="play(audio, 'myPlaylist')"  ng-class="{'text-active': currentMyPlaying.id == audio.id && isPlaying === true}"></i>
														<i class="icon-control-pause " pause-music  ng-class="{'text-active': (currentMyPlaying.id != audio.id && isPlaying === true) || !isPlaying}"></i>
													</a>

													<div class="clear text-ellipsis" ng-if="!audio.lyrics_id">
														<span>{{audio.artist}} - {{audio.title}}</span>
														<span class="text-muted"> -- {{audio.duration | secTime}}
														</span>
													</div>
													<a href="" ng-click="getLirics(audio.lyrics_id)" ng-if="audio.lyrics_id" class="clear text-ellipsis">
														<span>{{audio.artist}} - {{audio.title}}</span>
														<span class="text-muted"> -- {{audio.duration | secTime}}
														</span>
													</a>
												</li>
											</ul>
										</section>
									</section>
								</aside>

								<section class="col-sm-4 no-padder bg">
									<section class="vbox">
										<section playlist-scroll>
											<ul class="list-group list-group-lg no-bg auto m-b-none m-t-n-xxs">
												<li class="list-group-item clearfix" ng-repeat="audio in mainPlaylist track by $index" ng-class="{'active': current == audio.id}">

													<a href="#" class="jp-play-me pull-right m-t-sm m-l text-md">
														<i class="icon-control-play text" ng-click="play(audio, 'mainPlaylist')"  ng-class="{'text-active': currentMyPlaying.id == audio.id && isPlaying === true}"></i>
														<i class="icon-control-pause" pause-music  ng-class="{'text-active': (currentMyPlaying.id != audio.id && isPlaying === true) || !isPlaying}"></i>
													</a>

													<a href="#" class="jp-play-me pull-right m-t-sm m-l text-md" ng-click="removeFromPlaylist(audio, $index)" ng-if="audio.user_id === user.id && current != audio.id">
														<i class="icon-close"></i>
													</a>

													<a class="clear" href="" ng-click="getLirics(audio.lyrics_id)" ng-if="audio.lyrics_id">
														<span class="block text-ellipsis">{{audio.artist}} - <b>{{audio.title}}</b></span>
														<small class="text-muted">{{audio.fio}} </small>
													</a>

													<span class="clear" ng-if="!audio.lyrics_id">
														<span class="block text-ellipsis">{{audio.artist}} - <b>{{audio.title}}</b></span>
														<small class="text-muted">{{audio.fio}} </small>
													</span>
												</li>
											</ul>
										</section>
									</section>
								</section>
							</section>
						</section>
						<footer class="footer bg-success dker hide" ng-class="{'hide': !currentMyPlaying}">
							<sound-manager></sound-manager>
							<div id="jp_container_N" class="jp-video-270p">
								<div class="jp-type-playlist">
									<div class="jp-gui">
										<div class="jp-interface">
											<div class="jp-controls">
												<div>
													<a class="jp-previous" prev-track>
														<i class="icon-control-rewind i-lg"></i>
													</a>
												</div>
												<div>
													<a class="jp-play" ng-style="{display: !isPlaying ? 'inline-block' : 'none'}" play-music>
														<i class="icon-control-play i-2x"></i>
													</a>
													<a class="jp-pause" ng-style="{display: isPlaying ? 'inline-block' : 'none'}" pause-music>
														<i class="icon-control-pause i-2x">
														</i>
													</a>
												</div>
												<div>
													<a class="jp-next" next-track>
														<i class="icon-control-forward i-lg"></i>
													</a>
												</div>
												<div>
													<a class="jp-stop" stop-music>
														<i class="fa fa-stop">
														</i>
													</a>
												</div>
												<div class="jp-progress hidden-xs">
													<div class="jp-seek-bar dk" style="width: 100%;" seek-track>
														<div class="jp-play-bar bg" ng-style="{width : ( progress + '%' ) }"></div>
														<div class="jp-title text-lt not-active">{{ currentMyPlaying.artist }} - {{currentMyPlaying.title}}</div>
													</div>
												</div>
												<div class="hidden-xs hidden-sm jp-current-time text-xs text-muted">{{ currentPostion }}</div>
												<div class="hidden-xs hidden-sm jp-duration text-xs text-muted">{{ currentDuration }}</div>
												<div class="hidden-xs hidden-sm">
													<a class="jp-mute" title="mute" mute-music ng-class="{hid: mute}">
														<i class="icon-volume-2"></i>
													</a>
													<a class="jp-unmute" title="unmute" mute-music ng-class="{hid: !mute}">
														<i class="icon-volume-off">
														</i>
													</a>
												</div>
												<div class="hidden-xs hidden-sm jp-volume" >
													<div class="jp-volume-bar dk " volume-bar>
														<div class="jp-volume-bar-value lter not-active" ng-style="{width : ( volume + '%' ) }">
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</footer>
					</section>
					<a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open" data-target="#nav,html">
					</a>
				</section>
			</section>
		</section>
	</section>

	<script type="text/ng-template" id="externalTemplate">
		<pre>{{ngDialogData.text}}</pre>
	</script>

	<script src="/site/app.v1.js"></script>
	<script src="/site/app.plugin.js"></script>


	<!-- Bootstrap -->
	<!-- App -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular-sanitize.min.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
	<script src="/js/angular-soundmanager2.js"></script>
	<script src="/js/ngDialog.js"></script>
	<script src="/js/jquery-ui.min.js"></script>
	<script src="/js/sortable.js"></script>



	<script src="/js/jquery.mCustomScrollbar.js"></script>

	<script src="/js/app.js"></script>


	<script type="text/javascript" src="http://192.168.0.228:35729/livereload.js"></script>


</body>
</html>
